<script>
  jQuery(document).ready(function () {
    console.log("Document is ready, now preparing Freshchat trackings...");
    window.fcWidget.on("widget:opened", function (resp) {
      console.log("widget:opened");
      gtag('event', 'Freshchat widget: opened', {
        'event_category': 'Freshchat widget',
        'event_label': 'Freshchat widget: opened',
      });
    });
    window.fcWidget.on("widget:closed", function (resp) {
      console.log("widget:closed");
      gtag('event', 'Freshchat widget: closed', {
        'event_category': 'Freshchat widget',
        'event_label': 'Freshchat widget: closed',
      });
    });
    window.fcWidget.on('message:received', function (resp) {
      console.log("message:received");
      gtag('event', 'Freshchat message: received', {
        'event_category': 'Freshchat widget',
        'event_label': 'Freshchat message: received',
      });
    });
    window.fcWidget.on('message:sent', function (resp) {
      console.log("message:sent");
      gtag('event', 'Freshchat message: sent', {
        'event_category': 'Freshchat widget',
        'event_label': 'Freshchat message: sent',
      });
    });
    window.fcWidget.on('user:statechange', function (resp) {
      console.log("user:statechange");
      if (resp && resp.data && resp.data.userState === "created") {
        console.log("user:created");
        gtag('event', 'Freshchat user: created', {
          'event_category': 'Freshchat widget',
          'event_label': 'Freshchat user: created',
        });
      }
      if (resp && resp.data && resp.data.userState === "loaded") {
        console.log("user:loaded");
        gtag('event', 'Freshchat user: loaded', {
          'event_category': 'Freshchat widget',
          'event_label': 'Freshchat user: loaded',
        });
      }
      if (resp && resp.data && resp.data.userState === "identified") {
        console.log("user:identified");
        gtag('event', 'Freshchat user: identified', {
          'event_category': 'Freshchat widget',
          'event_label': 'Freshchat user: identified',
        });
      }
      if (resp && resp.data && resp.data.userState === "restored") {
        console.log("user:restored");
        gtag('event', 'Freshchat user: restored', {
          'event_category': 'Freshchat widget',
          'event_label': 'Freshchat user: restored',
        });
      }
    });
    console.log("Freshchat trackings should have been prepared.");
  });
</script>